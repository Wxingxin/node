
éå¸¸å¥½ ğŸ‘
ä¸‹é¢æˆ‘ç»™ä½ å†™ä¸€ä¸ª **å®Œæ•´çš„ Express é¡¹ç›®æ¨¡æ¿**ï¼Œå®ƒç»“åˆäº†ï¼š

âœ… `yargs-parser` åŠ¨æ€å‘½ä»¤è¡Œå‚æ•°
âœ… `dotenv` ç¯å¢ƒå˜é‡é…ç½®
âœ… `cors`ã€`morgan`ã€`helmet` å¸¸ç”¨ä¸­é—´ä»¶
âœ… è‡ªåŠ¨æ ¹æ®ä¸åŒæ¨¡å¼ï¼ˆå¼€å‘ / ç”Ÿäº§ï¼‰åŠ è½½é…ç½®

éå¸¸é€‚åˆä½ ä»¥ååœ¨ Node é¡¹ç›®ä¸­ç›´æ¥å¥—ç”¨ã€‚

---

## ğŸ§© ä¸€ã€é¡¹ç›®ç»“æ„

```
express-yargs-template/
â”‚
â”œâ”€ .env
â”œâ”€ package.json
â”œâ”€ server.js
â””â”€ src/
   â”œâ”€ app.js
   â””â”€ routes/
      â””â”€ index.js
```

---

## ğŸ“¦ äºŒã€å®‰è£…ä¾èµ–

```bash
npm init -y
npm install express dotenv yargs-parser cors morgan helmet
```

---

## âš™ï¸ ä¸‰ã€é…ç½® `.env`

```env
PORT=5000
MODE=development
```

---

## ğŸ§  å››ã€server.jsï¼ˆå¯åŠ¨å…¥å£æ–‡ä»¶ï¼‰

```js
// server.js
import yargsParser from 'yargs-parser';
import dotenv from 'dotenv';
import app from './src/app.js';

// 1. å…ˆåŠ è½½ .env æ–‡ä»¶
dotenv.config();

// 2. è§£æå‘½ä»¤è¡Œå‚æ•°
const args = yargsParser(process.argv.slice(2));

// 3. è·å–è¿è¡Œå‚æ•°ï¼ˆå‘½ä»¤è¡Œä¼˜å…ˆçº§æœ€é«˜ï¼‰
const port = args.port || process.env.PORT || 3000;
const mode = args.mode || process.env.MODE || 'development';

// 4. å¯åŠ¨æœåŠ¡
app.listen(port, () => {
  console.log(`ğŸš€ Server running on port ${port} in ${mode} mode`);
});
```

è¿è¡Œï¼š

```bash
node server.js --port=8080 --mode=production
```

è¾“å‡ºï¼š

```
ğŸš€ Server running on port 8080 in production mode
```

---

## ğŸ§© äº”ã€src/app.js

```js
// src/app.js
import express from 'express';
import cors from 'cors';
import morgan from 'morgan';
import helmet from 'helmet';
import router from './routes/index.js';

const app = express();

// ä¸­é—´ä»¶
app.use(express.json());
app.use(cors());
app.use(morgan('dev'));
app.use(helmet());

// æ³¨å†Œè·¯ç”±
app.use('/api', router);

// é”™è¯¯å¤„ç†ä¸­é—´ä»¶ï¼ˆç¤ºä¾‹ï¼‰
app.use((err, req, res, next) => {
  console.error(err.stack);
  res.status(500).json({ message: 'Internal Server Error' });
});

export default app;
```

---

## ğŸ“‚ å…­ã€src/routes/index.js

```js
// src/routes/index.js
import express from 'express';
const router = express.Router();

// ç¤ºä¾‹è·¯ç”±
router.get('/', (req, res) => {
  res.json({ message: 'Hello from Express + yargs-parser!' });
});

router.get('/info', (req, res) => {
  res.json({
    success: true,
    server: 'Express Template',
    timestamp: new Date().toISOString()
  });
});

export default router;
```

---

## ğŸ§ª ä¸ƒã€æµ‹è¯•è¿è¡Œ

1ï¸âƒ£ ç›´æ¥è¿è¡Œï¼š

```bash
node server.js
```

è¾“å‡ºï¼š

```
ğŸš€ Server running on port 5000 in development mode
```

2ï¸âƒ£ è¦†ç›–ç¯å¢ƒå˜é‡ï¼š

```bash
node server.js --port=8888 --mode=production
```

è®¿é—®ï¼š

```
http://localhost:8888/api
```

è¾“å‡ºï¼š

```json
{
  "message": "Hello from Express + yargs-parser!"
}
```

---

## ğŸ§© å…«ã€æ‰©å±•æ€è·¯

| åŠŸèƒ½    | å¯ä»¥æ·»åŠ çš„åŒ…             |
| ----- | ------------------ |
| æ—¥å¿—è®°å½•  | winston / pino     |
| æ•°æ®åº“   | mongoose / prisma  |
| JWTè®¤è¯ | jsonwebtoken       |
| ä¸Šä¼ æ–‡ä»¶  | multer             |
| APIæ–‡æ¡£ | swagger-ui-express |

---

æ˜¯å¦å¸Œæœ›æˆ‘åœ¨è¿™ä¸ªæ¨¡æ¿ä¸Š**ç»§ç»­æ‰©å±•ç™»å½•æ³¨å†ŒåŠŸèƒ½ï¼ˆJWT + bcryptï¼‰**ï¼Œè®©ä½ æ‹¥æœ‰ä¸€ä¸ªå¯ä»¥ç›´æ¥ç”¨çš„â€œå®Œæ•´åå°æ¨¡æ¿â€ï¼Ÿ
